## macros may not be used inside translatable strings.

#define WC_II_CAMPAIGN_NAME_1P
_ "World Conquest II 1p" #enddef

#define WC_II_CAMPAIGN_NAME_2P
_ "World Conquest II 2p" #enddef

#define WC_II_CAMPAIGN_NAME_3P
_ "World Conquest II 3p" #enddef

#define WC_II_CAMPAIGN_DESC_1P
	_ "A randomly generated campaign for 1 player. It has 6 level of difficulties.
(Expert level, 5 scenarios.)" #enddef

#define WC_II_CAMPAIGN_DESC_2P
	_ "A randomly generated cooperative campaign for 2 players. It has 6 level of difficulties.
(Expert level, 5 scenarios.)" #enddef

#define WC_II_CAMPAIGN_DESC_3P
	_ "A randomly generated cooperative campaign for 3 players. It has 6 level of difficulties.
(Expert level, 5 scenarios.)" #enddef


#define WC2_CAMPAIGN_NEW PLAYERS
[multiplayer]
	id = "WC_II_{PLAYERS}p"
	name= {WC_II_CAMPAIGN_NAME_{PLAYERS}P}
	description = {WC_II_CAMPAIGN_DESC_{PLAYERS}P}
	addon_min_version={STR_WC_II_MIN_COMPATIBLE_VERSION}
	allow_new_game=yes
	require_scenario=yes
	scenario_generation=lua
	[generator]
		id="WC_II_{PLAYERS}p"
		config_name={WC_II_CAMPAIGN_NAME_{PLAYERS}P}
		create_scenario = "
			local a = ...
			local function doit()
				wesnoth.dofile('~add-ons/World_Conquest_II/lua/map/main.lua'); return wc_ii_generate_scenario({PLAYERS}, a)
			end

			local status, res = xpcall(doit, function(e) std_print(e, debug.traceback()) end)
			if status then
				return res
			else
				std_print(res)
			end
		"
#ifdef EDITOR
		user_config = "
			local a = ...
			local function doit()
				wesnoth.dofile('~add-ons/World_Conquest_II/lua/map/main.lua');
				wesnoth.dofile('~add-ons/World_Conquest_II/lua/map/settings/settings_dialog.lua');
				return wc2_debug_settings({PLAYERS})
			end

			local status, res = xpcall(doit, function(e) std_print(e, debug.traceback()) end)
			if status then
				return res
			else
				std_print(res)
			end
		"
#endif
		[scenario]
			{DEFAULT_SCHEDULE}
			{DEFAULT_MUSIC_PLAYLIST}
		[/scenario]
	[/generator]
[/multiplayer]
#enddef

{WC2_CAMPAIGN_NEW 1}
{WC2_CAMPAIGN_NEW 2}
{WC2_CAMPAIGN_NEW 3}
